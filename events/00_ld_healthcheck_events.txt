namespace = ld

game_event = {
    id = ld.1100
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        if = { limit = { exists = global_var:ld_healthcheck_done } return = yes }
        set_global_variable = { name = ld_healthcheck_done value = 1 }

        # Minimal: warn if rule missing (optional)
        if = {
            limit = {
                NOT = {
                    OR = {
                        has_game_rule = ld_mp_safe
                        has_game_rule = ld_full
                    }
                }
            }
            send_interface_toast = {
                type = event_toast_effect_bad
                title = "LD Health Check"
                desc = "Missing/invalid game rule: ld_desync_mode. Save/modlist may not match."
            }
        }
    }
}